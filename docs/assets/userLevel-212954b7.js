import{i as m,_ as b,d as L,o as V,c as w,a as u,b as t,w as s,F as y,e as i}from"./index-c9c38515.js";import{E as k,a as C,b as _}from"./el-table-column-4aba63cb.js";import{b as E,E as I,a as U,c as F}from"./el-form-item-6aec74e8.js";import{E as N}from"./el-input-number-d8b59e6b.js";import{E as d}from"./el-tag-b03013a1.js";import{c as $}from"./cloneDeep-3c2f2a77.js";import"./index-5597c1ec.js";function W(){return m({url:"/api/userlevel/all",method:"get"})}function B(e){return m({url:`/api/userlevel/one?id=${e}`,method:"get"})}function O(e){return m({url:`/api/userlevel/delete?id=${e}`,method:"get"})}function A(e){return m({url:"/api/userlevel/add",method:"post",data:e})}function T(e){return m({url:"/api/userlevel/modify",method:"post",data:e})}const z=L({data(){return{input:"",userLevels:[],searchId:"",dialogFormVisible:!1,userLevel:{amount:0,description:"",discount:0,levelId:0,levelName:""},formLabelWidth:80}},mounted(){this.getUserLevelList()},methods:{research(){this.searchId=null,this.getUserLevelList()},search(){if(this.searchId==""){alert("请选择后进行查询");return}B(this.searchId).then(e=>{console.log(e),this.userLevels=[],this.userLevels.push(e.data.userLevel),console.log(this.userLevels)}).catch(e=>{console.log(e)})},toEdit(e){this.dialogFormVisible=!0,this.userLevel=$(e)},getUserLevelList(){W().then(e=>{console.log(e),this.userLevels=e.data.userLevels,console.log(this.userLevels)}).catch(e=>{console.log(e)})},del(e){O(e).then(l=>{if(l.success)this.getUserLevelList();else return console.log(l.msg),!1}).catch(l=>{})},toAdd(){this.dialogFormVisible=!0,this.userLevel={amount:0,description:"",discount:0,levelId:0,levelName:""}},save(){const e=this.userLevel;e.levelId==0?A(e).then(l=>{if(l.success)this.dialogFormVisible=!1,this.getUserLevelList(),d(l.msg);else return d(l.msg),!1}).catch(l=>{d("网络错误联系管理员")}):T(e).then(l=>{if(l.success)this.dialogFormVisible=!1,this.getUserLevelList(),d(l.msg);else return d(l.msg),!1}).catch(l=>{d("网络错误联系管理员")})}}}),D={style:{"margin-top":"10px"}},M={style:{width:"95%",margin:"0 auto"}},P={style:{width:"95%",margin:"0 auto","margin-bottom":"10px"}},j={class:"dialog-footer"};function q(e,l,G,H,J,K){const p=E,r=I,a=U,n=_,h=k,f=N,c=F,v=C;return V(),w(y,null,[u("div",D,[u("div",M,[t(r,{label:"用户等级编号","label-width":110,style:{display:"inline-flex","margin-right":"10px"}},{default:s(()=>[t(p,{modelValue:e.searchId,"onUpdate:modelValue":l[0]||(l[0]=o=>e.searchId=o),placeholder:"用户等级编号"},null,8,["modelValue"])]),_:1}),t(a,{type:"primary",onClick:e.search},{default:s(()=>[i("查询")]),_:1},8,["onClick"])]),u("div",P,[t(a,{type:"info",onClick:e.research},{default:s(()=>[i("重置")]),_:1},8,["onClick"]),t(a,{type:"success",onClick:e.toAdd},{default:s(()=>[i("添加")]),_:1},8,["onClick"])]),t(h,{data:e.userLevels,style:{width:"95%",margin:"0 auto"}},{default:s(()=>[t(n,{fixed:"",prop:"levelId",label:"编号",width:"80"}),t(n,{prop:"levelName",label:"头衔名称",width:"120"}),t(n,{prop:"discount",label:"折扣",width:"120"}),t(n,{prop:"amount",label:"等级必要金额",width:"150"}),t(n,{prop:"description",label:"头街描述",width:"150"}),t(n,{fixed:"right",label:"操作",width:"120"},{default:s(o=>[t(a,{link:"",type:"warning",size:"small",onClick:g=>e.toEdit(o.row)},{default:s(()=>[i("更新")]),_:2},1032,["onClick"]),t(a,{link:"",type:"danger",size:"small",onClick:g=>e.del(o.row.levelId)},{default:s(()=>[i("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),t(v,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":l[6]||(l[6]=o=>e.dialogFormVisible=o),title:"用户等级编辑"},{footer:s(()=>[u("span",j,[t(a,{onClick:l[5]||(l[5]=o=>e.dialogFormVisible=!1)},{default:s(()=>[i("Cancel")]),_:1}),t(a,{type:"primary",onClick:e.save},{default:s(()=>[i(" 保存 ")]),_:1},8,["onClick"])])]),default:s(()=>[t(c,{model:e.userLevel},{default:s(()=>[t(r,{label:"头衔名称","label-width":e.formLabelWidth},{default:s(()=>[t(p,{modelValue:e.userLevel.levelName,"onUpdate:modelValue":l[1]||(l[1]=o=>e.userLevel.levelName=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),t(r,{label:"折扣","label-width":e.formLabelWidth},{default:s(()=>[t(f,{modelValue:e.userLevel.discount,"onUpdate:modelValue":l[2]||(l[2]=o=>e.userLevel.discount=o),style:{width:"100%"},autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),t(r,{label:"必要金额","label-width":e.formLabelWidth},{default:s(()=>[t(f,{modelValue:e.userLevel.amount,"onUpdate:modelValue":l[3]||(l[3]=o=>e.userLevel.amount=o),style:{width:"100%"},autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),t(r,{label:"头街描述","label-width":e.formLabelWidth},{default:s(()=>[t(p,{type:"textarea",row:3,modelValue:e.userLevel.description,"onUpdate:modelValue":l[4]||(l[4]=o=>e.userLevel.description=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"]),u("template",null,[t(p,{modelValue:e.input,"onUpdate:modelValue":l[7]||(l[7]=o=>e.input=o),placeholder:"Please input"},null,8,["modelValue"])])],64)}const ee=b(z,[["render",q]]);export{ee as default};
