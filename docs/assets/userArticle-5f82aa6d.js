import{i as V,_ as A,d as _,r as I,o as C,c as y,a as r,b as t,w as o,e as h}from"./index-c4b406ba.js";import{c as E,a as T,b as v,E as U}from"./el-form-item-0c6e9fab.js";import{E as u}from"./el-tag-6021fadc.js";import{a as P,b as k}from"./el-pagination-ba5a53ac.js";import{a as L,E as W}from"./user-eb0ed749.js";import{E as D}from"./el-input-number-0f9d4e58.js";import{T as N}from"./TPaginationSelect-0de40698.js";import"./index-3a017d50.js";function B(e){return V({url:"/api/userArticle/add",method:"post",data:e})}const O=_({data(){return{selectPage:{total:0,current:1,size:6,pagerCount:5},userInfos:[],userArticle:{articleCatId:0,content:"",createTime:new Date,updateTime:new Date,deleted:0,id:0,open:0,title:""},formLabelWidth:80}},mounted(){this.getUserInfosPage(1)},components:{"t-pagination-select":N},methods:{reset(){this.userArticle={articleCatId:0,content:"",createTime:new Date,deleted:0,updateTime:new Date,id:0,open:0,title:""}},pageChange(e){this.getUserInfosPage(e)},getUserInfosPage(e){L({current:e,size:6}).then(i=>{const s=i.data.page;this.userInfos=s.records,this.selectPage=s}).catch(i=>{console.log(i)})},save(){const e=this.userArticle;if(e.id==0){let l={article:e,userId:e.userinfoId};B(l).then(i=>{if(i.success)this.userArticle={articleCatId:0,content:"",createTime:new Date,deleted:0,updateTime:new Date,id:0,open:0,title:""},u(i.msg);else return u(i.msg),!1}).catch(i=>{u("网络错误联系管理员")})}}}}),S={style:{width:"95%",margin:"0 auto","margin-top":"-10px"}},$={style:{width:"600px"}},z=r("h3",{style:{"margin-left":"280px"}},"添加用户文章",-1),F={class:"block"},K={class:"block"},M={class:"dialog-footer"};function j(e,l,i,s,q,G){const m=v,n=U,b=D,p=W,d=P,c=k,g=I("t-pagination-select"),w=E,f=T;return C(),y("div",S,[r("div",$,[t(w,{model:e.userArticle},{default:o(()=>[z,t(n,{label:"文章标题","label-width":e.formLabelWidth},{default:o(()=>[t(m,{placeholder:"请输入文章标题",modelValue:e.userArticle.title,"onUpdate:modelValue":l[0]||(l[0]=a=>e.userArticle.title=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),t(n,{label:"分类编号","label-width":e.formLabelWidth},{default:o(()=>[t(b,{modelValue:e.userArticle.articleCatId,"onUpdate:modelValue":l[1]||(l[1]=a=>e.userArticle.articleCatId=a),autocomplete:"off",style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["label-width"]),t(n,{label:"文章内容","label-width":e.formLabelWidth},{default:o(()=>[t(m,{type:"textarea",rows:3,placeholder:"请输入文章内容",modelValue:e.userArticle.content,"onUpdate:modelValue":l[2]||(l[2]=a=>e.userArticle.content=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),t(n,{label:"创建时间","label-width":e.formLabelWidth},{default:o(()=>[r("div",F,[t(p,{modelValue:e.userArticle.createTime,"onUpdate:modelValue":l[3]||(l[3]=a=>e.userArticle.createTime=a),type:"datetime",placeholder:"请选择创建时间"},null,8,["modelValue"])])]),_:1},8,["label-width"]),t(n,{label:"更新时间","label-width":e.formLabelWidth},{default:o(()=>[r("div",K,[t(p,{modelValue:e.userArticle.updateTime,"onUpdate:modelValue":l[4]||(l[4]=a=>e.userArticle.updateTime=a),type:"datetime",placeholder:"请选择更新时间"},null,8,["modelValue"])])]),_:1},8,["label-width"]),t(n,{label:"逻辑删除","label-width":e.formLabelWidth},{default:o(()=>[t(c,{modelValue:e.userArticle.deleted,"onUpdate:modelValue":l[5]||(l[5]=a=>e.userArticle.deleted=a),placeholder:"请选择逻辑删除",style:{width:"100%"}},{default:o(()=>[t(d,{label:"删除",value:1}),t(d,{label:"不删除",value:0})]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),t(n,{label:"是否公开","label-width":e.formLabelWidth},{default:o(()=>[t(c,{modelValue:e.userArticle.open,"onUpdate:modelValue":l[6]||(l[6]=a=>e.userArticle.open=a),placeholder:"请选择是否公开",style:{width:"100%"}},{default:o(()=>[t(d,{label:"公开",value:0}),t(d,{label:"不公开",value:1})]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),t(n,{label:"用户名称","label-width":e.formLabelWidth},{default:o(()=>[t(g,{onPageChange:e.pageChange,optionSource:e.userInfos,modelValue:e.userArticle.userinfoId,"onUpdate:modelValue":l[7]||(l[7]=a=>e.userArticle.userinfoId=a),labelKey:"userName",valueKey:"id",style:{width:"100%"},placeholder:"请选择用户名称",paginationOption:e.selectPage},null,8,["onPageChange","optionSource","modelValue","paginationOption"])]),_:1},8,["label-width"])]),_:1},8,["model"]),r("span",M,[t(f,{style:{"margin-left":"230px","margin-right":"30px"},onClick:e.reset},{default:o(()=>[h("重置")]),_:1},8,["onClick"]),t(f,{type:"primary",onClick:e.save},{default:o(()=>[h(" 保存 ")]),_:1},8,["onClick"])])])])}const ee=A(O,[["render",j]]);export{ee as default};
